name:                   Cargo deny2

on:
  pull_request:
  push:
    branches:
      - main
    tags:
      - v*
    paths-ignore:
      - 'README.md'
jobs:
  cargo-deny:
    runs-on:            ubuntu-latest
    continue-on-error:  true
    steps:
      - name:           Checkout sources & submodules
        uses:           actions/checkout@master
        with:
          fetch-depth:  5
          submodules:   recursive
      - name: Cargo fmt
        run: |
          rustup component add rustfmt
          cargo fmt
      - name: Commit Formatting changes
        uses: EndBug/add-and-commit@v9
        if: ${{ github.ref != 'refs/heads/main' }}
        with:
          add: src
          default_author: github_actions
          message: "ðŸ¤– cargo-fmt auto-update"
